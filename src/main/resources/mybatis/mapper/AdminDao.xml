<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.eco.dao.IAdminDao">

	<select id="adminCheck" resultType="string">
		select pw from admin where id=#{param1} 
	</select>
	
	<select id="getAllCount" resultType="_int">
		select count(*) from ${param1}  where ${param2} like '%'||#{param3}||'%'
	</select>
	
	<select id="listMusic" resultType="com.eco.dto.MusicVO"
		parameterType="com.eco.dto.Paging">
		select * from(
		select * from(
			select rownum as rn, b.* from 
			( (select * from music_view where title like '%'||#{param2}||'%' order by mseq desc) b )
		) where rn &gt;= #{param1.startNum}
		) where rn &lt;= #{param1.endNum}
	</select>
	
	<select id="listMember" resultType="com.eco.dto.MemberVO">
		select * from(
		select * from(
			select rownum as rn, m.* from 
			( (select * from member where name like '%'||#{param2}||'%' order by indate desc) m )
		) where rn &gt;= #{param1.startNum}
		) where rn &lt;= #{param1.endNum}
	</select>
	
	<select id="getMember" resultType="com.eco.dto.MemberVO">
		select * from member where useq=#{param1}
	</select>
	
	<select id="listArtist" resultType="com.eco.dto.ArtistVO">
		select * from(
		select * from(
			select rownum as rn, a.* from 
			( (select * from artist where name like '%'||#{param2}||'%' order by atseq desc) a )
		) where rn &gt;= #{param1.startNum}
		) where rn &lt;= #{param1.endNum}
	</select>
	
	<select id="listTheme" resultType="com.eco.dto.ThemeVO">
		select * from(
		select * from(
			select rownum as rn, t.* from 
			( (select * from theme where title like '%'||#{param2}||'%' order by tseq desc) t )
		) where rn &gt;= #{param1.startNum}
		) where rn &lt;= #{param1.endNum}
	</select>
	
	<insert id="themeInsert" parameterType="com.eco.dto.ThemeVO">
		insert into theme(tseq, title, img)
		values(theme_seq.nextval, #{title}, #{img})
	</insert>
	
	<select id="listChart" resultType="com.eco.dto.ChartVO">
		select * from(
		select * from(
			select rownum as rn, c.* from 
			( (select * from chart where title like '%'||#{param2}||'%' order by cseq desc) c )
		) where rn &gt;= #{param1.startNum}
		) where rn &lt;= #{param1.endNum}
	</select>
	
	<insert id="chartInsert" parameterType="com.eco.dto.ChartVO">
		insert into chart(cseq, title, img)
		values(chart_seq.nextval, #{title}, #{img})
	</insert>
	
	
	<select id="listGenre" resultType="com.eco.dto.GenreVO">
		select * from(
		select * from(
			select rownum as rn, g.* from 
			( (select * from genre where title like '%'||#{param2}||'%' order by gseq desc) g )
		) where rn &gt;= #{param1.startNum}
		) where rn &lt;= #{param1.endNum}
	</select>
	
	<insert id="genreInsert" parameterType="com.eco.dto.GenreVO">
		insert into genre(gseq, title)
		values(genre_seq.nextval, #{title})
	</insert>
	
</mapper>