<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.eco.dao.ICountDao">

	<select id="getAllCount" resultType="_int">
		select count(*) from ${param1}  where ${param2} like '%'||#{param3}||'%'
	</select>
	
	<select id="count" resultType="_int" parameterType="com.eco.dto.search.SearchDTO">
		select count(*) from ${searchTable}
		<where>
			<!-- searchkeywordTarget like searchKeyword -->
			<if test="searchkeywordTarget != ''">
				<choose>
					<when test="searchkeywordTarget == 'name'">and ${searchkeywordTarget} like '%'||#{searchKeyword}||'%'</when>
				</choose>
			</if>

			<!-- selectedGenre = gseq -->
			<if test="selectedGenre != ''">and gseq = #{selectedGenre}</if>

			<!-- selectedGroupyn like -->
			<if test="selectedGroupyn != ''">and groupyn like '%'||#{selectedGroupyn}||'%'</if>

			<!-- selectedGender like -->
			<if test="selectedGender != ''">and gender like '%'||#{selectedGender}||'%'</if>

		</where>
	</select>
</mapper>